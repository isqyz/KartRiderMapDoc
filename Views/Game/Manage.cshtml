@model (Player,IEnumerable<Track>)
@{
    ViewBag.Title = "玩家成绩管理";
    Player player = @Model.Item1;
    IEnumerable<Track> Tracks = @Model.Item2;
}

<h2>输入或更新玩家成绩</h2>

<form method="post" action="/Game/AddOrUpdate">
    <div>
        <label for="PlayerName">玩家名:</label>
        <input type="text" id="PlayerName" name="PlayerName" value="@player.PlayerName" required />
    </div>

    <div>
        <label for="TrackName">赛道名:</label>
        <select id="TrackName" name="TrackName">
            @foreach (var track in Tracks)
            {
                @if (track.TrackName == player.TrackName)
                {
                    <option value="@track" selected>@track</option>
                }
                else
                {
                    <option value="@track">@track.TrackName</option>
                }

            }
        </select>
    </div>

    <div>
        <label for="Score">成绩:</label>
        <input type="text" id="Score" name="Score" placeholder="mm:ss:SSS" maxlength="8" @* value="@player.Score" *@ required />

    </div>

    <button type="submit">保存</button>
</form>
<script>
    document.getElementById('Score').addEventListener('input', function(event) {
        let value = event.target.value.replace(/[^0-9]/g, ''); // 移除所有非数字字符
        if (value.length <= 0) {
            // 小于等于2位数，格式为 H
            value = value;
        } else if (value.length <= 2) {
            // 小于等于4位数，格式为 H:mm
            value = value.substring(0, 1) + ':' + value.substring(1);
        } else if (value.length <= 7) {
            // 小于等于7位数，格式为 H:mm:ss
            value = value.substring(0, 1) + ':' + value.substring(1, 3) + ':' + value.substring(3);
        } else {
            // 超过7位，截取前7位
            value = value.substring(0, 7);
        }

        // 更新输入框的值
        event.target.value = value;
    });
</script>